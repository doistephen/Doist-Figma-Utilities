(()=>{"use strict";const e=function(e){let t=figma.currentPage.selection;for(let i of t)if("FRAME"===i.type||"COMPONENT"===i.type||"INSTANCE"===i.type||"VECTOR"===i.type||"STAR"===i.type||"LINE"===i.type||"ELLIPSE"===i.type||"POLYGON"===i.type||"RECTANGLE"===i.type||"TEXT"===i.type){const t=i.parent;if(t&&"FRAME"===t.type||"COMPONENT"===t.type){const n=t.width,a=t.height,o=i.height,l=i.width,c=l/o;i.rotation=0,"horizontal"===e?i.constrainProportions?i.resize(n,n/c):i.resize(n,o):"vertical"===e&&(i.constrainProportions?i.resize(a*c,a):i.resize(l,a)),"horizontal"===e?i.x=0:"vertical"===e&&(i.y=0);const s=i.constraints.vertical,r=i.constraints.horizontal;"horizontal"===e?i.constraints={horizontal:"STRETCH",vertical:s}:"vertical"===e&&(i.constraints={horizontal:r,vertical:"STRETCH"})}else figma.closePlugin("Selection must be nested in a frame.")}else figma.closePlugin("Please select something that can be resized.")},t=function(e,t){const i=e.parent,n=e.width,a=e.height,o=e.relativeTransform,l=e.rotation;i.appendChild(t),t.appendChild(e),t.relativeTransform=o,e.rotation=0,e.x=0,e.y=0,t.resizeWithoutConstraints(n,a),t.rotation=l,e.constraints={horizontal:"SCALE",vertical:"SCALE"}};function i(e){return JSON.parse(JSON.stringify(e))}const n=["78156f8a72740bd0d9ac694b9f76ccc0062d3781"],a=async function(){const e=await async function(){const e=n.map((async e=>await figma.importStyleByKeyAsync(e)));return await Promise.all(e)}();let a=figma.currentPage.selection;for(let n of a)if("RECTANGLE"===n.type)if("IMAGE"===n.fills[0].type){if("CROP"!=n.fills[0].scaleMode){const e=i(n.fills);e[0].scaleMode="CROP",n.fills=e}const a=figma.createFrame();let o=i(a.fills);o=[],a.fills=o,t(n,a);const l=n.clone();a.appendChild(l),n.name="Image",l.name="Tint",l.fillStyleId=e[0].id,n.isMask=!0,figma.currentPage.selection=[]}else figma.closePlugin("Only select nodes with single image fills.");else figma.closePlugin("Only select nodes with single image fills")},o=["41ab95be099656c241ec9adc7cf3a0c37ccde992","18b0ca4d3e7369d0df6e720bdfe89ae03fd48e81","d32603c45d4423b2d9ea47bdf93633fd907340e3"],l=async function(){let e=figma.currentPage.selection;const n=await async function(){const e=o.map((async e=>await figma.importStyleByKeyAsync(e)));return await Promise.all(e)}();for(let a of e)if("RECTANGLE"===a.type)if("IMAGE"===a.fills[0].type){if("CROP"!=a.fills[0].scaleMode){const e=i(a.fills);e[0].scaleMode="CROP",a.fills=e}const o=figma.createFrame();t(a,o),o.cornerRadius=4,o.strokeWeight=1,o.strokeStyleId=n[1].id,o.fillStyleId=n[0].id,o.effectStyleId=n[2].id,o.name=a.name,a.name="Screenshot";const l=i(e);l[0]=o,figma.currentPage.selection=l,o.constrainProportions=!0}else figma.closePlugin("Make sure your rectangle has only an image fill");else"FRAME"===a.type||"INSTANCE"===a.type?(a.cornerRadius=4,a.strokeWeight=1,a.strokeStyleId=n[1].id,a.fillStyleId=n[0].id,a.effectStyleId=n[2].id,a.clipsContent=!0):figma.closePlugin("Select only frames or rectangles with image fills");figma.closePlugin()},c=function(){figma.currentPage.findAll((e=>"$Annotation"===e.name)).forEach((e=>{!1===e.visible?e.visible=!0:e.visible=!1}))},s=function(e){let t=figma.currentPage.selection;0===t.length&&figma.closePlugin("Select at least one object"),t.forEach((t=>{"COMPONENT_SET"===t.type?t.children.forEach((t=>{!function(e,t){e.children.forEach((e=>{"SLICE"===e.type&&e.remove()}));const i=figma.createSlice(),n=e.width,a=e.height,o=e.name,l=e.parent.name;e.appendChild(i),i.x=0,i.y=0,i.resize(n,a),i.name=function(e,t,i){const n=Object.fromEntries(t.trim().split(",").map((e=>e.trim().replace(/[\s/]/g,"_").split("=")))),a=n.Size;delete n.Size;const o="android"===i?"dp":"ios"===i?"pt":"px",l=[e.toLowerCase().replace(/[\s/]/g,"_").replace(/__+/,"_"),...Object.values(n).map((e=>e.toLowerCase())).filter(Boolean),`${a}${o}`].join("_");return"ios"===i?(l.match(/[a-zA-Z0-9]+/g)||[]).map((e=>`${e.charAt(0).toUpperCase()}${e.slice(1)}`)).join(""):l}(l,o,t),i.exportSettings="ios"===t?[{format:"PDF"}]:[{format:"SVG"}]}(t,e)})):figma.closePlugin("Please only select Component Sets (the purple dotted box around variants)")}))};let r=figma.currentPage.selection;const f="8c32c8ca5ef4ba59cac6370fdda69fa90758a003",g=["4","8","12","16","24","32","48","64","96","128","160","192","240"];function m(e){const t=e.parent;return"INSTANCE"===t.type||"PAGE"!==t.type&&m(t)}const d=function(e){for(let t of r){let i;if("INSTANCE"===t.type&&t.mainComponent.key===f){let n;const a=t.children[0];"FRAME"===a.type&&(n=a.children[0]),console.log(n.characters);let o=n.characters,l=g.indexOf(o);i="increase"===e&&l<g.length-1?g[l+1]:"decrease"===e&&l>0?g[l-1]:o,t.paddingTop=i/2,t.paddingRight=i/2,t.paddingBottom=i/2,t.paddingLeft=i/2,t.primaryAxisSizingMode="AUTO",t.counterAxisSizingMode="AUTO",t.primaryAxisAlignItems="CENTER",t.counterAxisAlignItems="CENTER",figma.loadFontAsync({family:"Roboto Mono",style:"Regular"}).then((()=>{n.setRangeFontName(0,n.characters.length,{family:"Roboto Mono",style:"Regular"}),n.characters=i})).catch((e=>{console.error(e)}))}}figma.closePlugin()},p=["cs","da","de","es","fi","fr","it","ja","ko","nb","nl","pl","pt_BR","ru","sv","tr","zh_CN","zh_TW"],u=e=>{figma.root.children.forEach((t=>{p.forEach((i=>{t.name.startsWith(`[${i}]`)&&t.children.forEach((t=>{t.exportSettings=[{format:e.toUpperCase(),constraint:{type:"SCALE",value:2}}],t.name.startsWith(`${i} / `)?t.name=t.name:t.name=i+" / "+t.name}))}))})),figma.closePlugin()};"showUI"===figma.command&&(figma.showUI(__html__,{width:300,height:310}),figma.ui.onmessage=t=>{if("fullWidth"===t)e("horizontal");else if("fullHeight"===t)e("vertical");else if("fullSize"===t)e("vertical"),e("horizontal");else if("frameScreenshot"===t)l();else if("formatIllo"===t)a();else if("hideAnnotations"===t)c();else if("iosSlices"===t)s("ios");else if("androidSlices"===t)s("android");else if("webSlices"===t)s("web");else if("langJpg"===t)u("jpg");else{if("langPng"!==t)return;u("png")}}),"frameScreenShot"===figma.command&&l(),"hideAnnotations"===figma.command&&(c(),figma.closePlugin()),"fullWidth"===figma.command&&(e("horizontal"),figma.closePlugin()),"fullHeight"===figma.command&&(e("vertical"),figma.closePlugin()),"fullSize"===figma.command&&(e("vertical"),e("horizontal"),figma.closePlugin()),"formatIllo"===figma.command&&(a(),figma.closePlugin()),"insertSpacing"===figma.command&&function(){if(r&&1===r.length){const e=r[0],t=e.parent;if(m(e))return figma.closePlugin("You can't add elements to a component instance."),!1;const i=function(e){return e.parent.children.map((e=>e.id)).indexOf(e.id)};figma.importComponentByKeyAsync(f).then((n=>{const a=n.createInstance();t.insertChild(i(e)+1,a),a.opacity=0,figma.currentPage.selection=[a]})),figma.closePlugin()}}(),"increaseSpacing"===figma.command&&d("increase"),"decreaseSpacing"===figma.command&&d("decrease"),"itemsStretch"===figma.command&&function(){const e=figma.currentPage.selection;0===e.length&&figma.closePlugin("Select at least one object"),e.forEach((e=>{if("FRAME"===e.type&&"VERTICAL"===e.layoutMode||"COMPONENT"===e.type&&"VERTICAL"===e.layoutMode){for(let t of e.children)t.layoutAlign="STRETCH",t.layoutGrow=0;"FRAME"===e.parent.type&&"NONE"!==e.parent.layoutMode&&("AUTO"===e.parent.counterAxisSizingMode&&(e.parent.counterAxisSizingMode="FIXED"),e.layoutAlign="STRETCH",e.layoutGrow=0),figma.closePlugin("Children set to fill container")}else figma.closePlugin()}))}(),"deleteLocalizedPages"===figma.command&&function(){const e=figma.root.children;e.forEach((t=>{let i=!1;p.forEach((n=>{if(t.name.startsWith(`[${n}]`)&&0!==e.indexOf(t)){if(t===figma.currentPage)return figma.closePlugin("Can't delete current page"),!1;i=!0}})),i?t.remove():figma.closePlugin()})),figma.closePlugin()}()})();