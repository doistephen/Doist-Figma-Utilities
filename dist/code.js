(()=>{"use strict";const e=function(e){let i=figma.currentPage.selection;for(let t of i)if("FRAME"===t.type||"COMPONENT"===t.type||"INSTANCE"===t.type||"VECTOR"===t.type||"STAR"===t.type||"LINE"===t.type||"ELLIPSE"===t.type||"POLYGON"===t.type||"RECTANGLE"===t.type||"TEXT"===t.type){const i=t.parent;if(i&&"FRAME"===i.type||"COMPONENT"===i.type){const a=i.width,n=i.height,o=t.height,l=t.width,c=l/o;t.rotation=0,"horizontal"===e?t.constrainProportions?t.resize(a,a/c):t.resize(a,o):"vertical"===e&&(t.constrainProportions?t.resize(n*c,n):t.resize(l,n)),"horizontal"===e?t.x=0:"vertical"===e&&(t.y=0);const s=t.constraints.vertical,r=t.constraints.horizontal;"horizontal"===e?t.constraints={horizontal:"STRETCH",vertical:s}:"vertical"===e&&(t.constraints={horizontal:r,vertical:"STRETCH"})}else figma.closePlugin("Selection must be nested in a frame.")}else figma.closePlugin("Please select something that can be resized.")},i=function(e,i){const t=e.parent,a=e.width,n=e.height,o=e.relativeTransform,l=e.rotation;t.appendChild(i),i.appendChild(e),i.relativeTransform=o,e.rotation=0,e.x=0,e.y=0,i.resizeWithoutConstraints(a,n),i.rotation=l,e.constraints={horizontal:"SCALE",vertical:"SCALE"}};function t(e){return JSON.parse(JSON.stringify(e))}const a=["78156f8a72740bd0d9ac694b9f76ccc0062d3781"],n=async function(){const e=await async function(){const e=a.map((async e=>await figma.importStyleByKeyAsync(e)));return await Promise.all(e)}();let n=figma.currentPage.selection;for(let a of n)if("RECTANGLE"===a.type)if("IMAGE"===a.fills[0].type){if("CROP"!=a.fills[0].scaleMode){const e=t(a.fills);e[0].scaleMode="CROP",a.fills=e}const n=figma.createFrame();let o=t(n.fills);o=[],n.fills=o,i(a,n);const l=a.clone();n.appendChild(l),a.name="Image",l.name="Tint",l.fillStyleId=e[0].id,a.isMask=!0,figma.currentPage.selection=[]}else figma.closePlugin("Only select nodes with single image fills.");else figma.closePlugin("Only select nodes with single image fills")},o=["41ab95be099656c241ec9adc7cf3a0c37ccde992","18b0ca4d3e7369d0df6e720bdfe89ae03fd48e81","d32603c45d4423b2d9ea47bdf93633fd907340e3"],l=async function(){let e=figma.currentPage.selection;const a=await async function(){const e=o.map((async e=>await figma.importStyleByKeyAsync(e)));return await Promise.all(e)}();for(let n of e)if("RECTANGLE"===n.type)if("IMAGE"===n.fills[0].type){if("CROP"!=n.fills[0].scaleMode){const e=t(n.fills);e[0].scaleMode="CROP",n.fills=e}const o=figma.createFrame();i(n,o),o.cornerRadius=4,o.strokeWeight=1,o.strokeStyleId=a[1].id,o.fillStyleId=a[0].id,o.effectStyleId=a[2].id,o.name=n.name,n.name="Screenshot";const l=t(e);l[0]=o,figma.currentPage.selection=l,o.constrainProportions=!0}else figma.closePlugin("Make sure your rectangle has only an image fill");else"FRAME"===n.type||"INSTANCE"===n.type?(n.cornerRadius=4,n.strokeWeight=1,n.strokeStyleId=a[1].id,n.fillStyleId=a[0].id,n.effectStyleId=a[2].id,n.clipsContent=!0):figma.closePlugin("Select only frames or rectangles with image fills");figma.closePlugin()},c=function(){figma.currentPage.findAll((e=>"$Annotation"===e.name)).forEach((e=>{!1===e.visible?e.visible=!0:e.visible=!1}))},s=function(e){let i=figma.currentPage.selection;0===i.length&&figma.closePlugin("Select at least one object"),i.forEach((i=>{"COMPONENT_SET"===i.type?i.children.forEach((i=>{!function(e,i){e.children.forEach((e=>{"SLICE"===e.type&&e.remove()}));const t=figma.createSlice(),a=e.width,n=e.height,o=e.name,l=e.parent.name;e.appendChild(t),t.x=0,t.y=0,t.resize(a,n),t.name=function(e,i,t){const a=Object.fromEntries(i.trim().split(",").map((e=>e.trim().replace(/[\s/]/g,"_").split("=")))),n=a.Size;delete a.Size;const o="android"===t?"dp":"ios"===t?"pt":"px",l=[e.toLowerCase().replace(/[\s/]/g,"_").replace(/__+/,"_"),...Object.values(a).map((e=>e.toLowerCase())).filter(Boolean),`${n}${o}`].join("_");return"ios"===t?(l.match(/[a-zA-Z0-9]+/g)||[]).map((e=>`${e.charAt(0).toUpperCase()}${e.slice(1)}`)).join(""):l}(l,o,i),t.exportSettings="ios"===i?[{format:"PDF"}]:[{format:"SVG"}]}(i,e)})):figma.closePlugin("Please only select Component Sets (the purple dotted box around variants)")}))};function r(e){const i=e.parent;return"INSTANCE"===i.type||"PAGE"!==i.type&&r(i)}function f(){let e=figma.currentPage.selection,i=[];e.forEach((e=>{if(!r(e)&&"TEXT"===e.type){{const a=e.width,n=e.height,o=e.constraints,l=e.relativeTransform,c=e.fills;let s,r=12;e.fontSize!==figma.mixed?s=r:figma.closePlugin("Only select text nodes with one font size applied.");const f=function(e,i,a,n){const o=figma.createFrame();o.name="Skeleton Text",o.fills=[],o.resize(e,i);const l=figma.createRectangle();o.appendChild(l),t(l.fills),l.fills=n,l.opacity=.1,l.cornerRadius=2,l.name="Shape";const c=Math.ceil(.85*a);return l.resize(e,c),o.layoutMode="HORIZONTAL",o.primaryAxisAlignItems="CENTER",o.counterAxisAlignItems="CENTER",o}(a,n,s,c);e.parent.appendChild(f),f.relativeTransform=l,f.constraints=o,e.remove(),i=[...i,f]}figma.currentPage.selection=i,figma.closePlugin()}}))}let m=figma.currentPage.selection;const g="8c32c8ca5ef4ba59cac6370fdda69fa90758a003",d=["4","8","12","16","24","32","48","64","96","128","160","192","240"],p=function(e){for(let i of m){let t;if("INSTANCE"===i.type&&i.mainComponent.key===g){let a;const n=i.children[0];"FRAME"===n.type&&(a=n.children[0]),console.log(a.characters);let o=a.characters,l=d.indexOf(o);t="increase"===e&&l<d.length-1?d[l+1]:"decrease"===e&&l>0?d[l-1]:o,i.paddingTop=t/2,i.paddingRight=t/2,i.paddingBottom=t/2,i.paddingLeft=t/2,i.primaryAxisSizingMode="AUTO",i.counterAxisSizingMode="AUTO",i.primaryAxisAlignItems="CENTER",i.counterAxisAlignItems="CENTER",figma.loadFontAsync({family:"Roboto Mono",style:"Regular"}).then((()=>{a.setRangeFontName(0,a.characters.length,{family:"Roboto Mono",style:"Regular"}),a.characters=t})).catch((e=>{console.error(e)}))}}figma.closePlugin()},u=["ar","cs","da","de","es","fi","fr","it","ja","ko","nb","nl","pl","pt_BR","ru","sv","tr","zh_CN","zh_TW"],h=e=>{figma.root.children.forEach((i=>{u.forEach((t=>{i.name.startsWith(`[${t}]`)&&i.children.forEach((i=>{i.exportSettings=[{format:e.toUpperCase(),constraint:{type:"SCALE",value:2}}],i.name.startsWith(`${t} / `)?i.name=i.name:i.name=t+" / "+i.name}))}))})),figma.closePlugin()},y=function(){const e=figma.root.children;e.forEach((i=>{let t=!1;u.forEach((a=>{if(i.name.startsWith(`[${a}]`)&&0!==e.indexOf(i)){if(i===figma.currentPage)return figma.closePlugin("Can't delete current page"),!1;t=!0}})),t?i.remove():figma.closePlugin()})),figma.closePlugin()},P=()=>{h("png");const e=figma.root.children;let i=[];e.forEach((t=>{u.forEach((a=>{if(t.name.startsWith(`[${a}]`)&&0!==e.indexOf(t)){let e=[];t.children.forEach((i=>{e=[...e,i]})),i=[...i,e]}}))}));const t=i.reduce(((e,i)=>(i.forEach(((i,t)=>{e[t]=e[t]||[],e[t].push(i)})),e)),[]),a=figma.createPage();a.name="Localized Graphics";const n=figma.createFrame();n.layoutMode="VERTICAL",n.counterAxisSizingMode="AUTO",n.itemSpacing=96,n.fills=[],n.name="Graphics",t.forEach((e=>{const i=figma.createFrame();i.layoutMode="HORIZONTAL",i.counterAxisSizingMode="AUTO",i.itemSpacing=64,i.fills=[];const t=e[0].name;i.name=t.substr(t.indexOf("/")+1).trim(),a.appendChild(i),e.map((e=>{i.appendChild(e)})),n.appendChild(i)})),a.appendChild(n),figma.currentPage=a,y(),figma.closePlugin()};"showUI"===figma.command&&(figma.showUI(__html__,{width:300,height:310}),figma.ui.onmessage=i=>{if("fullWidth"===i)e("horizontal");else if("fullHeight"===i)e("vertical");else if("fullSize"===i)e("vertical"),e("horizontal");else if("frameScreenshot"===i)l();else if("formatIllo"===i)n();else if("hideAnnotations"===i)c();else if("iosSlices"===i)s("ios");else if("androidSlices"===i)s("android");else if("webSlices"===i)s("web");else if("moveLocalizedFramesToPage"===i)P();else if("deleteLocalizedPages"===i)y();else if("langJpg"===i)h("jpg");else if("langPng"===i)h("png");else{if("textToSkeleton"!==i)return;f()}}),"frameScreenShot"===figma.command&&l(),"hideAnnotations"===figma.command&&(c(),figma.closePlugin()),"fullWidth"===figma.command&&(e("horizontal"),figma.closePlugin()),"fullHeight"===figma.command&&(e("vertical"),figma.closePlugin()),"fullSize"===figma.command&&(e("vertical"),e("horizontal"),figma.closePlugin()),"formatIllo"===figma.command&&(n(),figma.closePlugin()),"insertSpacing"===figma.command&&function(){if(m&&1===m.length){const e=m[0],i=e.parent;if(r(e))return figma.closePlugin("You can't add elements to a component instance."),!1;const t=function(e){return e.parent.children.map((e=>e.id)).indexOf(e.id)};figma.importComponentByKeyAsync(g).then((a=>{const n=a.createInstance();i.insertChild(t(e)+1,n),n.opacity=0,figma.currentPage.selection=[n],figma.closePlugin()}))}else 0===m.length?figma.importComponentByKeyAsync(g).then((e=>{const i=e.createInstance();figma.currentPage.insertChild(0,i),i.opacity=0,figma.currentPage.selection=[i];const{x:t,y:a}=figma.viewport.center;i.x=t,i.y=a,figma.closePlugin()})):figma.closePlugin("Only select one layer at a time, or no layers.")}(),"increaseSpacing"===figma.command&&p("increase"),"decreaseSpacing"===figma.command&&p("decrease"),"autoLayout"===figma.command&&function(){const e=figma.currentPage.selection;if(0===e.length)return figma.closePlugin("Select at least one auto layout frame."),!1;e.forEach((e=>{if("FRAME"===e.type||"COMPONENT"===e.type)if("VERTICAL"===e.layoutMode)for(let i of e.children)i.layoutAlign="STRETCH",i.layoutGrow=0,"FRAME"===e.parent.type&&"NONE"!==e.parent.layoutMode&&("AUTO"===e.parent.counterAxisSizingMode&&(e.parent.counterAxisSizingMode="FIXED"),e.layoutAlign="STRETCH",e.layoutGrow=0),figma.closePlugin("Children set to fill container");else"HORIZONTAL"===e.layoutMode&&(e.counterAxisAlignItems="CENTER",figma.closePlugin("Children aligned center"));else figma.closePlugin("Only select autolayout frames.")}))}(),"moveLocalizedFramesToPage"===figma.command&&P(),"deleteLocalizedPages"===figma.command&&y(),"textToSkeleton"===figma.command&&f()})();